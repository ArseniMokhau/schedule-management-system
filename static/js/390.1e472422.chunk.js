"use strict";(self.webpackChunkschedule_management_system=self.webpackChunkschedule_management_system||[]).push([[390],{390:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var s=r(43),a=r(216),n=r(307),i=r(107),o=r(579);const l=function(){const[e,t]=(0,s.useState)(""),[r,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[p,u]=(0,s.useState)(""),{setIsLoggedIn:g,setTeacherId:h,setToken:m,setExpirationDate:y}=(0,i.J)(),f=(0,a.Zp)();return(0,o.jsx)("div",{className:"login-register-wrapper",children:(0,o.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("https://backend-azure-sqlite-appservice.azurewebsites.net/Main/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r,title:c})}),a=t.headers.get("Content-Type");let i;if(i=a&&a.includes("application/json")?await t.json():await t.text(),t.ok)if("string"===typeof i&&"User registered successfully"===i){const t=await fetch("https://backend-azure-sqlite-appservice.azurewebsites.net/Main/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})}),a=await t.json();if(t.ok){if(g(!0),h(a.teacherId),m(a.token),!a.expiration)return void u("Expiration date is missing in the response");try{const e=(0,n.qg)(a.expiration,"M/d/yyyy",new Date).toISOString();y(e)}catch(s){return console.error("Date parsing error:",s.message),void u("Invalid expiration date received")}f("/")}else console.error("Server error:",a),a&&a.message?u(a.message):u("An error occurred during login")}else i.message?u(i.message):u("Unexpected response format");else u("An error occurred during registration")}catch(a){console.error("Registration Error:",a.message),u("An error occurred. Please try again.")}},className:"login-register-form",children:[(0,o.jsx)("h2",{children:"Register"}),(0,o.jsx)("div",{className:"form-element",children:(0,o.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Username",required:!0})}),(0,o.jsx)("div",{className:"form-element",children:(0,o.jsx)("input",{type:"password",value:r,onChange:e=>l(e.target.value),placeholder:"Password",required:!0})}),(0,o.jsx)("div",{className:"form-element",children:(0,o.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Title",required:!0})}),p&&(0,o.jsx)("p",{style:{color:"red"},children:p}),(0,o.jsx)("button",{type:"submit",children:"Register"})]})})}}}]);
//# sourceMappingURL=390.1e472422.chunk.js.map