"use strict";(self.webpackChunkschedule_management_system=self.webpackChunkschedule_management_system||[]).push([[390],{390:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var r=s(43),a=s(216),n=s(107),i=s(579);const o=function(){const[e,t]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[d,p]=(0,r.useState)(""),{setIsLoggedIn:u,setTeacherId:g,setToken:h,setExpirationDate:m}=(0,n.J)(),f=(0,a.Zp)();return(0,i.jsx)("div",{className:"login-register-wrapper",children:(0,i.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("https://backend-azure-sqlite-appservice.azurewebsites.net/Main/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s,title:l})}),r=t.headers.get("Content-Type");let a;if(a=r&&r.includes("application/json")?await t.json():await t.text(),t.ok)if("string"===typeof a&&"User registered successfully"===a){const t=await fetch("https://backend-azure-sqlite-appservice.azurewebsites.net/Main/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),r=await t.json();if(t.ok){u(!0),g(r.teacherId),h(r.token);const e=new Date(r.expiration.split("/").reverse().join("-")).toISOString();m(e),f("/")}else p(r.message||"Login failed")}else a.message?p(a.message):p("Unexpected response format");else p("An error occurred during registration")}catch(r){console.error("Registration Error:",r.message),p("An error occurred. Please try again.")}},className:"login-register-form",children:[(0,i.jsx)("h2",{children:"Register"}),(0,i.jsx)("div",{className:"form-element",children:(0,i.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Username",required:!0})}),(0,i.jsx)("div",{className:"form-element",children:(0,i.jsx)("input",{type:"password",value:s,onChange:e=>o(e.target.value),placeholder:"Password",required:!0})}),(0,i.jsx)("div",{className:"form-element",children:(0,i.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"Title",required:!0})}),d&&(0,i.jsx)("p",{style:{color:"red"},children:d}),(0,i.jsx)("button",{type:"submit",children:"Register"})]})})}}}]);
//# sourceMappingURL=390.e753df03.chunk.js.map